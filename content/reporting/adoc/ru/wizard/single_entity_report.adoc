:sourcesdir: ../../../source

[[single_entity_report]]
=== Отчёт по экземпляру сущности

Допустим, что мы хотим получить сведения об отдельно взятом издании книги, то есть экземпляре сущности `library$BookPublication`.

Для этого запустите мастер создания отчётов и на первом этапе укажите детали отчёта:

* *Entity* – сущность, по экземпляру которой будет создаваться отчёт – `library$BookPublication`.

* *Template type* – формат шаблона, по которому будет создаваться отчёт – <<template_doc,DOCX>>. Доступны также форматы <<template_xls,XSLX>>, <<template_html,HTML>>, <<template_csv,CSV>> и <<template_chart,Chart>>.

* *Report name* – имя, под которым будет сохранен отчёт – `Publication details`.

Затем выберите тип построения отчёта – *Report for single entity*. Этот тип построения означает, что отчёт будет создаваться по одной сущности.

.Создание отчёта по экземпляру сущности в мастере: шаг 1
image::single_entity_step_1.png[align="center"]

После этого нажмите на кнопку *Next* и в отобразившемся окне выберите атрибуты сущности `BookPublication` и связанных с ней сущностей, которые будут включены в отчёт (`Publication.Book.Name`, `Publication.Publisher.Name`, `Publication.Year` и `Publication.City.Name`). Для этого выделите их в левой колонке и перенесите в правую колонку нажатием на кнопку image:attributes_selection_arrow.png[] или двойным кликом.

Атрибуты будут отображаться в отчёте в том порядке, в котором они выбраны на этом этапе. Для того чтобы изменить порядок отображения, перемещайте атрибуты при помощи кнопок image:attributes_selection_up.png[]/image:attributes_selection_down.png[].

.Создание отчёта по экземпляру сущности в мастере: выбор атрибутов
image::single_entity_attributes.png[align="center"]

После нажатия на кнопку **ОК** произойдет переход ко второму этапу – редактированию регионов отчёта.

Отобразившийся экран содержит список именованных регионов – полос шаблона отчёта, в которых будут отображаться данные. Мастер позволяет добавить в шаблон несколько регионов, позволяющих отображать разные наборы данных в виде простого текста.

При необходимости набор атрибутов сущности, загружаемых в регион шаблона отчёта, можно отредактировать, нажав на ссылку со списком атрибутов в описании региона. Также можно добавить новый регион, нажав на кнопку *Add simple region*.

Если в сущности есть атрибуты-коллекции, появится также кнопка *Add tabulated region*, позволяющая добавить регион для отображения данных в виде таблицы.

В обоих случаях отобразится окно выбора атрибутов сущности `library$BookPublication`, позволяющее добавить или удалить атрибуты из набора.

.Создание отчёта по экземпляру сущности в мастере: шаг 2
image::single_entity_step_2.png[align="center"]

На этом этапе посмотрите, как отчёт будет выглядеть с текущим набором данных, нажав на кнопку *Run* и выбрав экземпляр сущности `library$BookPublication`.

.Окно предварительного запуска отчёта с текущим набором данных
image::single_entity_test_running.png[align="center"]

После настройки регионов перейдите к третьему этапу – сохранению отчёта. На этом этапе просмотрите готовый шаблон отчёта, измените название и формат файла вывода, выбрав один из доступных типов.

.Создание отчёта по экзмепляру сущности в мастере: шаг 3
image::single_entity_step_3.png[align="center"]

После нажатия на кнопку *Save* откроется стандартный редактор отчёта, в котором при необходимости произведите более тонкую настройку шаблона и структуры данных. После завершения редактирования нажмите *Save and close* в редакторе отчёта.

Отчёт будет добавлен в группу отчётов *General* в браузере отчётов, откуда его можно запустить кнопкой *Run*.

.Созданный отчёт в списке отчётов системы
image::single_entity_reports_list.png[align="center"]

Дополнительно мы можем сделать так, чтобы отчёт о деталях публикации запускался из браузера публикаций. Для этого в XML-дескрипторе `bookpublication-browse.xml` определите для таблицы публикаций стандартное действие <<list_print_form_action,ListPrintFormAction>>:

[source, xml]
----
include::{sourcesdir}/single_entity_report_example_1.xml[]
----

Далее свяжите отчёт с экраном просмотра сущности `BookPublication`. Откройте отчёт на редактирование, перейдите на вкладку *Roles and Screens*, выберите экран `library$BookPublication.browse` из выпадающего списка и добавьте его в таблицу ниже:

.Окно редактирования отчёта: связывание отчёта с экраном
image::single_entity_screens.png[align="center"]

После этого запустите отчёт по любой публикации, выбирая ее в таблице и нажимая на кнопку *Print details*.

.Запуск отчёта из браузера публикаций
image::single_entity_running.png[align="center"]

Готовый отчёт выглядит следующим образом:

.Пример выполненного отчёта
image::single_entity_result.png[align="center"]

