:sourcesdir: ../../../source

[[qs_project_setup]]
=== Настройка проекта

. Загрузите и распакуйте исходный репозиторий приложения *Библиотека* или клонируйте проект, используя git:
+
----
  git clone https://github.com/cuba-platform/sample-library-cuba7
----

. Откройте проект Library, как описано в разделе {studio_man_url}/open_project.html[Открытие существующего проекта] Руководства пользователя CUBA Studio.

. Откройте редактор свойств проекта в CUBA Studio: главное меню *CUBA* -> *Project Properties*. В списке *App components* добавьте элемент *fts*. Когда Studio предложит пересоздать скрипты Gradle, согласитесь. Studio загрузит необходимые исходники и бинарные {main_man_url}/glossary.html#artifact[артефакты]. Если проект не синхронизируется с файлами Gradle автоматически, нажмите на кнопку image:refresh_button.png[] в окне инструментов *Gradle*.

. Создайте базу данных на локальном сервере *HyperSQL*. Выберите пункт меню *CUBA* -> *Create database*.

. Запустите приложение: кликните на кнопку image:run_button.png[] рядом с выбранной конфигурацией `CUBA Application` в главной панели инструментов. Ссылка на локальный сервер в секции *Runs at…​* позволит перейти к приложению непосредственно из Studio.

. Откройте приложение *Библиотека*.
+
Логин и пароль пользователя − `admin` / `admin`.

. Для того, чтобы включить функциональность полнотекстового поиска, в главном меню приложения откройте *Administration* -> *Application properties*, найдите и откройте список `fts` в таблице свойств, двойным щелчком откройте атрибут *fts.enabled* и выберите *true* в поле *Current value*.
+
image::fts_enabled_true.png[align="center"]

После выполнения вышеописанных действий функциональность полнотекстового поиска подключена к приложению и готова к работе. Если выйти из системы и снова выполнить логин, в правой части верхней панели главного окна приложения появится поле поиска. Кроме того, полнотекстовый поиск может использоваться в UI-компоненте link:{main_man_url}/gui_Filter.html#gui_Filter_fts[Filter].

Однако поиск не будет давать результатов, так как никакие данные еще не проиндексированы.

Для однократного запуска индексации текущего состояния базы данных (а точнее, сущностей, описанных в конфигурационном файле FTS по умолчанию), откройте в главном меню *Administration* -> *JMX Console*, найдите JMX-бин `app-core.fts:type=FtsManager` и вызовите последовательно сначала метод `reindexAll()`, а затем `processQueue()`.

image::jmx_fts_setup.png[align="center"]

После этого поиск, например, строки "adm" должен выдавать следующие результаты:

image::2.1_project_setup.png[align="center"]

